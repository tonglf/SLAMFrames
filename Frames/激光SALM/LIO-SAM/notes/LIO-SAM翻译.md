# LIO-SAM

**LIO-SAM: Tightly-coupled Lidar Inertial Odometry via Smoothing and Mapping**

**LIO-SAM：基于平滑和映射的紧耦合激光雷达惯性里程计**

## 摘要

我们提出了一个通过smoothing and mapping（gtsam优化库）实现紧耦合激光雷达惯性里程计的框架LIO-SAM，该framework可实现高精度、实时的移动机器人轨迹估计和地图构建。LIO-SAM在因子图（ factor graph）上实现了激光雷达惯性里程计，允许从different sources将大量相对和绝对测量（包括回环）作为因子整合到系统中。可以通过IMU预积分的运动估计消除点云的畸变（de-skew），并生成激光雷达里程计优化的 initial guess。获得的激光雷达里程计的解被用于估计IMU的偏差（bias）。为了确保高精度的实时性，我们将旧的激光雷达scans边缘化以优化姿态，而不是将激光雷达scans与全局地图匹配。在局部尺度而不是全局尺度上进行scan匹配可以显著提高系统的实时性能，引入关键帧以及滑动窗口的方法可以将新关键帧对齐到固定大小的prior“子关键帧”集合（位于滑窗中的关键帧）中。我们在三个平台收集的在不同规模和环境生成的数据集上对所提出的方法进行了广泛的评估。
## 1.引言

状态估计、定位和建图是智能移动机器人的基本先决条件，需要反馈控制、避障和规划等许多功能。利用基于视觉和基于激光雷达的传感技术，人们致力于实现高性能的实时同步定位和映射（SLAM），以支持移动机器人的六自由度状态估计。基于视觉的方法通常使用单目或立体相机，并在连续图像上对特征进行三角化，以确定相机的运动。尽管基于视觉的方法特别适合于位置识别，但它们对初始化、照明和范围的敏感性使得它们单独用于支持自主导航系统时不可靠。另一方面，基于激光雷达的方法在很大程度上对光照变化保持不变。特别是最近，随着远程、高分辨率3D激光雷达的出现，例如Velodyne VLS-128和Outster OS1-128，激光雷达变得更适合直接捕捉3D空间中环境的细节。因此，本文主要研究基于激光雷达的状态估计和建图方法。

在过去的二十年中，人们提出了许多基于激光雷达的状态估计和建图方法。其中，在[1]中提出的用于低漂移和实时状态估计和映射的激光雷达里程计和建图（LOAM）方法是应用最广泛的方法之一。LOAM使用激光雷达和惯性测量单元（IMU），具有最先进的性能，自其在KITTI里程计基准站点发布以来，一直被列为基于激光的最佳方法[2]。尽管取得了成功，但LOAM仍存在一些局限性—通过将其数据保存在全局体素图（voxel map）中，通常很难执行回环检测并结合其他绝对测量（例如GPS）进行位姿校正。当voxel map在特征丰富的环境中变得稠密时，其在线优化的效率会降低。在大型场景的测试中，LOAM也会受到漂移的影响，因为它的核心是一种基于扫描匹配的方法。

在本文中，我们提出了一个通过smoothing and mapping的紧耦合激光雷达惯性里程计框架LIO-SAM，以解决上述问题。我们假定一个点云去畸变（de-skew）的非线性运动模型，使用原始IMU测量值估计激光雷达扫描期间的传感器运动。除了对点云去畸变外，估计的运动还可作为激光雷达里程计优化的initial guess。然后使用获得的激光雷达里程计的解来估计因子图中IMU的偏差。通过引入用于机器人轨迹估计的全局因子图，我们可以使用激光雷达和IMU测量有效地执行传感器融合，在机器人位姿之间加入位置识别，并在可用时引入绝对测量，如GPS定位和指南针朝向。This collection of factors from various sources用于因子图的联合优化。此外，为了优化姿态，我们将旧的激光雷达scans边缘化，而不是将scans与global map匹配（不同于LOAM的方法）。在局部尺度而不是全局尺度上进行扫描匹配，可以显著提高系统的实时性能，选择性引入关键帧以及高效的滑动窗口方法（将新关键帧对齐到先前“子关键帧”的固定大小set）也是如此。我们工作的主要贡献可总结如下

- 一个紧耦合的激光雷达惯性里程计框架，构建在因子图之上，适用于多传感器融合和全局优化。

- 一种高效、基于局部滑动窗口的扫描匹配方法，通过选择性地将新关键帧对齐到固定大小的prior子关键帧集中，实现实时性能。
- 提出的框架在各种规模、车辆和环境的测试中得到广泛验证。

## 2.相关工作

激光雷达里程测量通常是通过使用扫描匹配方法（如ICP[3]和GICP[4]找到两个连续帧之间的相对变换来执行的。基于特征的匹配方法由于其计算效率而成为一种流行的替代方法，而不是匹配完整的点云。例如，在[5]中，提出了一种用于实时激光雷达里程计的基于平面的匹配方法。假设在结构化环境中运行，它从点云中提取平面，并通过解决最小二乘问题进行匹配。文献[6]提出了一种基于线的里程估计方法。在该方法中，从原始点云中随机生成线段，然后用于后续的配准。然而，由于现代3D激光雷达的旋转机制和传感器的运动，扫描的点云往往会发生倾斜。单独使用激光雷达进行姿态估计并不理想，因为使用倾斜点云或特征进行配准最终会导致较大漂移。

因此，激光雷达通常与其他传感器（如IMU和GPS）一起用于状态估计和映射。这种利用传感器融合的设计方案通常可分为两类：松耦合融合和紧耦合融合。在LOAM[1]中，引入IMU来消除激光雷达扫描的倾斜，并在扫描匹配之前给出运动。然而，IMU不参与算法的优化过程。因此，LOAM可归类为松散耦合方法。[7]中提出了一种轻型地面优化激光雷达里程计和地图（LeGOLOAM）方法，用于地面车辆地图任务[8]。其IMU测量值的融合与LOAM相同。一种更流行的松耦合融合方法是使用扩展卡尔曼滤波器（EKF）。例如，[9]-[13]在机器人状态估计的优化阶段使用EKF集成来自激光雷达、IMU和可选GPS的测量。

紧密耦合系统通常提供更高的精度，目前是正在进行的研究的主要焦点。在[15]中，利用预集成IMU测量来消除点云的倾斜。[16]中介绍了一种机器人中心激光雷达惯性状态估计器R-LINS。R-LINS使用误差状态卡尔曼滤波器以紧密耦合的方式递归校正机器人的状态估计。由于缺乏其他可用的状态估计传感器，它在长时间的导航过程中会出现漂移。[17]介绍了一种紧密耦合的激光雷达惯性里程计和测绘框架LIOM。LIOM是LIO映射的缩写，它联合优化了lidar和IMU的测量，与LOAM相比，达到了类似或更好的精度。由于LIOM设计用于处理所有传感器测量，因此无法实现实时性能-在我们的测试中，它以大约0.6的实时速度运行。

## 3.基于平滑和映射的激光雷达惯性里程计

### A. System Overview

### B. IMU Preintegration Factor

### C. Lidar Odometry Factor

### D. GPS Factor

虽然我们可以仅利用IMU预积分和激光雷达里程计因子获得可靠的状态估计和建图，但系统在长时间导航任务中仍会出现漂移。为了解决这个问题，我们可以引入提供绝对测量以消除漂移的传感器。这些传感器包括高度表、指南针和GPS。为了便于说明，我们将讨论GPS，因为它广泛应用于现实世界的导航系统中。

当我们接收到GPS测量值时，我们首先使用[21]中提出的方法将其转换为局部笛卡尔坐标系（因为GPS得到的数据是经纬度，不能直接拿来应用）。在因子图中添加新节点后，我们将新的GPS因子与该节点关联。如果GPS信号与激光雷达帧不同步，我们将根据激光雷达帧的时间戳在GPS测量值之间进行线性插值。

我们注意到，当GPS接收可用时，不需要不断添加GPS因子，因为激光雷达惯性里程计的漂移增长非常缓慢。实际上，我们仅在估计的位置协方差大于接收到的GPS位置协方差时添加GPS因子。

### E. Loop Closure Factor

由于使用了因子图，回环检测也可以很好地整合到提出的系统中，而这是LOAM和LIOM不能实现的。为了便于说明，我们描述并实现了一种简单但有效的基于欧几里德距离的回环检测方法（两帧距离较近而时间较远，就可尝试回环）。我们还注意到，我们提出的框架与回环检测的其他方法兼容，例如，[22]和[23]，它们生成点云描述符并将其用于位置识别。
## 4.实验



## 5.总结与讨论

我们提出了LIO-SAM，一个通过smoothing和mapping实现紧耦合激光雷达惯性里程测量的框架，用于在复杂环境中执行实时状态估计和建图。LIO-SAM通过在因子图上建立激光雷达惯性里程计，特别适用于多传感器融合。额外的传感器测量可以很容易地作为新的因素纳入到框架中。提供绝对测量值的传感器，如GPS、指南针或高度计，可用于消除激光雷达惯性里程计在长时间内或在特征较少的环境中的累积漂移。位置识别也可以很容易地集成到系统中。为了提高系统的实时性，我们提出了一种滑动窗口方法来边缘化旧的激光雷达帧进行scan匹配。有选择地将关键帧添加到因子图中，并且在生成激光雷达里程计和环路闭合因子时，新关键帧仅对齐（registered）到固定大小的子关键帧集。这种局部范围而非全局范围的scan匹配有助于LIO-SAM框架的实时性能。我们在三个平台收集的数据集上对所提出的方法进行了全面的评估，这些数据集跨越各种环境。结果表明，与LOAM和LIOM相比，LIO-SAM可以达到相似或更好的精度。未来的工作包括在无人机上测试拟提出的系统



------------------------------------------------
版权声明：本文为CSDN博主「每天都在努力学习SLAM的小黑」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_45626706/article/details/122129020